{"backend_state":"running","connection_file":"/projects/e3d2641f-202e-4d19-8d28-c5191fb7dcfc/.local/share/jupyter/runtime/kernel-1c82492f-e201-4a78-93e3-1c74bd798e2d.json","kernel":"cv_env","kernel_error":"","kernel_state":"idle","kernel_usage":{"cpu":0,"memory":0},"metadata":{"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.8.13"}},"trust":true,"type":"settings"}
{"cell_type":"code","end":1655392115451,"exec_count":3,"id":"966609","input":"import os, urllib.request, json  # json for pretty output\nfrom serpapi import GoogleSearch\n\n\ndef get_google_images():\n    params = {\n        \"api_key\": \"f6c760c22062dddfc837b8ca36272005c06e05668eaa633d737619214acac3b7\",\n        \"engine\": \"google\",\n        \"q\": \"iron man robert john downey jr face\",\n        \"tbm\": \"isch\",\n    }\n\n    search = GoogleSearch(params)\n    results = search.get_dict()\n    print(search)\n    print(results)\n    # print(json.dumps(results['suggested_searches'], indent=2, ensure_ascii=False))\n    print(json.dumps(results[\"images_results\"], indent=2, ensure_ascii=False))\n    # save files to /SerpApi_Images/ if it doesn't exist create the folder\n    if not os.path.exists(\"./SerpApi_Images/\"):\n        os.makedirs(\"./SerpApi_Images/\")\n\n    # -----------------------\n    # Downloading images\n\n    for index, image in enumerate(results[\"images_results\"]):\n        print(f\"Downloading {index} image...\")\n\n        opener = urllib.request.build_opener()\n        opener.addheaders = [\n            (\n                \"User-Agent\",\n                \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36 Edge/18.19582\",\n            )\n        ]\n        urllib.request.install_opener(opener)\n        # filepath is current working directory + SerpApi_Images + params[\"q\"] + index + .jpg\n        filepath = os.path.join(\"./SerpApi_Images/\", params[\"q\"] + str(index) + \".jpg\")\n\n        urllib.request.urlretrieve(image[\"original\"], filepath)\n\n\n","kernel":"cv_env","pos":0,"start":1655392115441,"state":"done","type":"cell"}
{"cell_type":"code","end":1655392155839,"exec_count":4,"id":"9e9da6","input":"get_google_images()","kernel":"cv_env","output":{"0":{"name":"stdout","text":"https://serpapi.com/search\n"},"1":{"more_output":true}},"pos":1,"scrolled":true,"start":1655392118768,"state":"done","type":"cell"}
{"cell_type":"code","exec_count":0,"id":"4bb763","input":"","pos":2,"type":"cell"}
{"id":0,"time":1655391928619,"type":"user"}
{"last_load":1655391929691,"type":"file"}