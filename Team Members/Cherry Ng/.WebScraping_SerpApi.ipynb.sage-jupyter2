{"backend_state":"init","connection_file":"/projects/e3d2641f-202e-4d19-8d28-c5191fb7dcfc/.local/share/jupyter/runtime/kernel-d2c05c27-2c6d-4e92-a9e2-96193648cab6.json","kernel":"cv_env","kernel_error":"","kernel_state":"idle","kernel_usage":{"cpu":0,"memory":0},"metadata":{"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.8.13"}},"trust":true,"type":"settings"}
{"cell_type":"code","exec_count":0,"id":"f2257e","input":"","pos":3,"type":"cell"}
{"cell_type":"code","exec_count":14,"id":"598c54","input":"get_google_images()","output":{"0":{"name":"stdout","output_type":"stream","text":"https://serpapi.com/search\n"},"1":{"name":"stderr","output_type":"stream","text":"WARNING: Some output was deleted.\n"}},"pos":1,"scrolled":true,"type":"cell"}
{"cell_type":"code","exec_count":15,"id":"7d66c0","input":"import os, urllib.request, json  # json for pretty output\nfrom serpapi import GoogleSearch\n\n\ndef get_google_images():\n    params = {\n        \"api_key\": \"bcee82053e84b27c72bce53c1c9e30bb62eb1d1bc163f8836e09b4583df138c0\",\n        \"engine\": \"google\",\n        \"q\": \"evelyn from everything everywhere all at once\",\n        \"tbm\": \"isch\",\n    }\n\n    search = GoogleSearch(params)\n    results = search.get_dict()\n    print(search)\n    print(results)\n    # print(json.dumps(results['suggested_searches'], indent=2, ensure_ascii=False))\n    print(json.dumps(results[\"images_results\"], indent=2, ensure_ascii=False))\n    # save files to /SerpApi_Images/ if it doesn't exist create the folder\n    if not os.path.exists(\"./SerpApi_Images/\"):\n        os.makedirs(\"./SerpApi_Images/\")\n\n    # -----------------------\n    # Downloading images\n\n    for index, image in enumerate(results[\"images_results\"]):\n        print(f\"Downloading {index} image...\")\n\n        opener = urllib.request.build_opener()\n        opener.addheaders = [\n            (\n                \"User-Agent\",\n                \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36 Edge/18.19582\",\n            )\n        ]\n        urllib.request.install_opener(opener)\n        # filepath is current working directory + SerpApi_Images + params[\"q\"] + index + .jpg\n        filepath = os.path.join(\"./SerpApi_Images/\", params[\"q\"] + str(index) + \".jpg\")\n\n        urllib.request.urlretrieve(image[\"original\"], filepath)\n\n","pos":0,"type":"cell"}
{"cell_type":"code","exec_count":5,"id":"531b12","input":"","output":{"0":{"ename":"SyntaxError","evalue":"invalid syntax (1482202780.py, line 1)","output_type":"error","traceback":["\u001b[0;36m  Input \u001b[0;32mIn [5]\u001b[0;36m\u001b[0m\n\u001b[0;31m    \"search_metadata\":\u001b[0m\n\u001b[0m                      ^\u001b[0m\n\u001b[0;31mSyntaxError\u001b[0m\u001b[0;31m:\u001b[0m invalid syntax\n"]}},"pos":2,"type":"cell"}
{"id":0,"time":1655132563335,"type":"user"}
{"last_load":1655219640139,"type":"file"}