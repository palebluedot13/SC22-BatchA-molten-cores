{"backend_state":"running","connection_file":"/projects/e3d2641f-202e-4d19-8d28-c5191fb7dcfc/.local/share/jupyter/runtime/kernel-6c28bc40-d5ee-428d-b164-6ec74c8b3549.json","kernel":"cv_env","kernel_error":"","kernel_state":"idle","kernel_usage":{"cpu":0,"memory":0},"metadata":{"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.8.13"}},"trust":true,"type":"settings"}
{"cell_type":"code","end":1654799990417,"exec_count":13,"id":"e028f2","input":"import os, urllib.request, json  # json for pretty output\nfrom serpapi import GoogleSearch\n\n\ndef get_google_images():\n    params = {\n        \"api_key\": \"2d341e703eb83e66ff489d6f7d620f576be65ea9b5a751ae2451041342cf7153\",\n        \"engine\": \"google\",\n        \"q\": \"Steve Rogers\",\n        \"tbm\": \"isch\",\n    }\n\n    search = GoogleSearch(params)\n    results = search.get_dict()\n    print(search)\n    print(results)\n    # print(json.dumps(results['suggested_searches'], indent=2, ensure_ascii=False))\n    print(json.dumps(results[\"images_results\"], indent=2, ensure_ascii=False))\n    # save files to /SerpApi_Images/ if it doesn't exist create the folder\n    if not os.path.exists(\"./SerpApi_Images/\"):\n        os.makedirs(\"./SerpApi_Images/\")\n\n    # -----------------------\n    # Downloading images\n\n    for index, image in enumerate(results[\"images_results\"]):\n        print(f\"Downloading {index} image...\")\n\n        opener = urllib.request.build_opener()\n        opener.addheaders = [\n            (\n                \"User-Agent\",\n                \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36 Edge/18.19582\",\n            )\n        ]\n        urllib.request.install_opener(opener)\n        # filepath is current working directory + SerpApi_Images + params[\"q\"] + index + .jpg\n        filepath = os.path.join(\"./SerpApi_Images/\", params[\"q\"] + str(index) + \".jpg\")\n\n        urllib.request.urlretrieve(image[\"original\"], filepath)\n\n\n","kernel":"cv_env","pos":0,"start":1654799990406,"state":"done","type":"cell"}
{"cell_type":"code","end":1654800018613,"exec_count":14,"id":"65339a","input":"get_google_images()","kernel":"cv_env","output":{"0":{"name":"stdout","text":"https://serpapi.com/search\n"},"1":{"more_output":true}},"pos":1,"start":1654799994677,"state":"done","type":"cell"}
{"cell_type":"code","exec_count":0,"id":"10aca8","input":"","pos":2,"type":"cell"}
{"id":0,"time":1654796824612,"type":"user"}
{"last_load":1654790379662,"type":"file"}